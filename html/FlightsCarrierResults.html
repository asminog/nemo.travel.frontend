<div class="nemo-flights-results js-nemoApp__component" data-bind="setBodyClass: 'nemo-common-contentPageBody nemo-flights-resultsBody'">
	<!-- ko if: $$loading -->
		<div class="nemo-flights-results__loader"></div>
	<!-- /ko -->

	<!-- ko if: $$error -->
		<div class="nemo-flights-results__globalError">
			<div class="nemo-ui-subContainer nemo-flights-results__globalError__block" data-bind="text: $$error()"></div>
		</div>
	<!-- /ko -->

	<!-- ko if: !$$loading() -->
		<!-- ko with: formReloader -->
			<section class="nemo-flights-results__form js-flights-results__form" data-bind="
				component: {
					name: 'Flights/SearchForm/Controller',
					params: {
						route: [],
						formData: $parent.$$rawdata,
						additional: {
							useAdditionalOptions: false,
							forceChangeToSearch: true
						}
					}
				},
				visible: $parent.formActive,
				flightsResultsSearchFormHider: !$parent.isResultsOutdated() ? $parent.formActive : function() { }
			"></section>
		<!-- /ko -->

				<section class="nemo-flights-results__summary" data-bind="css: {'nemo-flights-results__summary_formActive': formActive()}">
	<!-- ko if: searchInfo().vicinityDates == 0 && !error() && visiblePostFilters().length -->
		<div class="nemo-ui-button nemo-ui-button_common nemo-flights-results__summary__filterSwitch js-flights-results__adaptiveFiltersNoClose"
		     data-bind="
				click: function () {if (resultsLoaded()) {PFActive(!PFActive());}},
				css: {'nemo-flights-results__summary__filterSwitch_active': PFActive()},
				text: $root.i18n('FlightsSearchResults', 'formDummy__filterSwitch')"></div>
	<!-- /ko -->

	<div class="nemo-flights-results__summary__inner js-flights-results__formOpener" data-bind="click: function () {formActive(!formActive())}, visible: !formActive()">
		<div data-bind="
			foreach: searchInfo().segments,
			attr: {'class':'nemo-flights-results__summary__route nemo-flights-results__summary__route_' + searchInfo().tripType}">
			<div class="nemo-flights-results__summary__route__segment">

				<!-- ko if: $parent.searchInfo().tripType != 'RT' || $index() != 1 -->
				<div class="nemo-flights-results__summary__route__segment__geo nemo-flights-results__summary__route__segment__geo_departure" data-bind="with: departure"><span class="nemo-flights-results__summary__route__segment__geo__main" data-bind="text: name"></span><span class="nemo-flights-results__summary__route__segment__geo__aux" data-bind="text: ', ' + country.name"></span></div>

				<div class="nemo-flights-results__summary__route__segment__geo nemo-flights-results__summary__route__segment__geo_arrival" data-bind="with: arrival"><span class="nemo-flights-results__summary__route__segment__geo__main" data-bind="text: name"></span><span class="nemo-flights-results__summary__route__segment__geo__aux" data-bind="text: ', ' + country.name"></span></div>
				<!-- /ko -->

				<div class="nemo-flights-results__summary__route__segment__date"
				     data-bind="text:
						(
							$parent.searchInfo().tripType == 'RT' ?
							$root.i18n('FlightsSearchResults', 'formDummy__route__rt__' + ($index() == 0 ? 'flight' : 'return')) + ' ' :
							''
						) +
						departureDate.getDate() +
						' ' +
						departureDate.getMonthName() +
						', ' +
						departureDate.getDOWName()">
				</div>
			</div>
		</div>

		<div class="nemo-flights-results__summary__passengers">
			<span class="nemo-flights-results__summary__passengers_passengers" data-bind="text: passengersSummary()"></span>

			<!-- ko if: searchInfo().serviceClass !== 'All' -->
				<span class="nemo-flights-results__summary__passengers_serviceClass" data-bind="text: $root.i18n('FlightsSearchForm', 'serviceClass_' + searchInfo().serviceClass)"></span>
			<!-- /ko -->
		</div>

		<div class="nemo-ui-button nemo-flights-results__summary__switch"
		     data-bind="text: $root.i18n('FlightsSearchResults', 'formDummy__switch')"></div>
	</div>

	<!-- ko if: PFActive() -->
	<div class="nemo-common-postFilters nemo-flights-results__summary__filters js-flights-results__adaptiveFiltersNoClose" data-bind="flightsResultsAdaptivePF: PFActive">
		<div class="nemo-flights-results__summary__filters__header"
		     data-bind="
				text: $root.i18n('FlightsSearchResults', 'controls__count_' + (visibleResultsCount() == totalResultsCount ? 'all' : 'filtered'))
				.replace('[%-count-%]', visibleResultsCount())
				.replace('[%-total-%]', totalResultsCount)"></div>

		<div class="nemo-ui-subContainer nemo-common-postFilters nemo-flights-results__summary__filters__filters" data-bind="template: {name: 'nemo-koTemplate-FlightsResults-PostFilters', data: $data}"></div>

		<div class="nemo-flights-results__summary__filters__controls"><div class="nemo-flights-results__summary__filters__controls__item"><button class="nemo-ui-button nemo-ui-button_common nemo-flights-results__summary__filters__controls__button"data-bind="click: function () {PFActive(!PFActive());},text: $root.i18n('FlightsSearchResults', 'PF__adaptive__closePF')"></button></div><div class="nemo-flights-results__summary__filters__controls__item" data-bind="if: postFiltersHaveValue()"><button class="nemo-ui-button nemo-ui-button_common nemo-flights-results__summary__filters__controls__button" data-bind="click: PFClearAll, text: $root.i18n('FlightsSearchResults', 'PF__adaptive__clearAll')"></button></div></div>
	</div>
	<!-- /ko -->
</section>	<!-- /ko -->

	<!-- ko if: error -->
		<div data-bind="attr:{ 'class': 'nemo-flights-results__error nemo-flights-results__error_' + error() }">
			<div class="nemo-flights-results__error__header" data-bind="text: $root.i18n('FlightsSearchResults', 'error_' + error() + '_header')"></div>
			<div class="nemo-flights-results__error__content" data-bind="text: forcedMessageAsIs() ? forcedMessageAsIs() : $root.i18n('FlightsSearchResults', 'error_' + error())"></div>
		</div>

		<!-- ko if: error() == 404 -->
			<!-- ko foreach: noResultsMatrix -->
				<div class="flights-carrierResults__leg flights-carrierResults__leg_404">
					<div class="flights-carrierResults__leg__header" data-bind="with: $parent.searchInfo().segments[$index()]">
						<!-- ko if: $parents[1].searchInfo().tripType == 'RT' -->
						<span class="flights-carrierResults__leg__header__caption"
							  data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__caption_' + $parentContext.$index())"></span>
						<div class="flights-carrierResults__leg__header__adaptiveCaption"
							 data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__adaptiveCaption_' + $parentContext.$index())"></div>
						<!-- /ko -->

						<span class="flights-carrierResults__leg__header__date" data-bind="text: departureDate.getDate() + ' ' + departureDate.getMonthName()"></span>
						<span class="flights-carrierResults__leg__header__departure" data-bind="text: departure.city ? departure.city.name : departure.name"></span>
						<span class="flights-carrierResults__leg__header__arrival" data-bind="text: arrival.city ? arrival.city.name : arrival.name"></span>
						<!-- ko if: $parents[1].searchInfo().tripType == 'RT' -->
						<div data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__tip_' + $parentContext.$index()),
										attr: {
											'class': 'flights-carrierResults__leg__header__tip' +
													 ((($parentContext.$index() == 0 && $parents[1].shiftedDateReturnSelected()) || ($parentContext.$index() == 1 && $parents[1].shiftedDateDepartSelected())) ? ' flights-carrierResults__leg__header__tip_visible' : '')
										}"></div>
						<!-- /ko -->
					</div>

					<!-- ko template: {name: 'nemo-koTemplate-FlightsResults-DateSwitcher', data: $data} --><!-- /ko -->
				</div>
			<!-- /ko -->
		<!-- /ko -->
	<!-- /ko -->

	<!-- ko if: warning -->
		<div data-bind="automaticPopup: {
					title: $root.i18n('FlightsSearchResults', 'warning_' + warning() + '_header'),
					dialogClass: 'nemo-flights-results__warning',
					close: function () {warning(false);},
					buttons: warning() == 204 ? [
						{
							text: $root.i18n('FlightsSearchResults', 'warning_' + warning() + '_button_continue'),
							click: function () {$(this).data('ui-popup__close')();},
							'class': 'ui-button_pseudoLink ui-button_secondary'
						},
						{
							text: $root.i18n('FlightsSearchResults', 'warning_' + warning() + '_button_return'),
							click: function () {
								$$controller.navigate('/search/' + id + '/' + $root.helpers.getFlightsRouteURLAdder('search', searchInfo()), true, 'FlightsSearchForm');
							}
						}
					] :
					[]
				}">
			<div data-bind="text: $root.i18n('FlightsSearchResults', 'warning_' + warning())" style="display: none;"></div>
		</div>
	<!-- /ko -->

	<!-- ko if: !$$loading() && !error() -->
				<!-- ko if: bookingCheckError -->
	<div data-bind="automaticPopup: { title: $root.i18n('FlightsSearchResults', 'bookingCheck__error__title') }">
		<div class="nemo-flights-results__bookingCheck nemo-flights-results__bookingCheck_error">
			<div data-bind="text: $root.i18n('FlightsSearchResults', 'bookingCheck__error__header')"></div>
			<div class="nemo-flights-results__bookingCheck__errorMessage" data-bind="text: bookingCheckError()"></div>
			
			<div class="nemo-flights-results__bookingCheck__buttons">
				<a class="nemo-ui-button nemo-ui-button_common" data-bind="attr: { 'href': searchFormURL() }, text: $root.i18n('FlightsSearchResults', 'booikingCheck__link_to_mainPage')"></a>
				<div class="nemo-ui-button nemo-ui-button_medium" data-bind="
					click: hideFlightCheckErrorPopup, 
					text: $root.i18n('FlightsSearchResults', 'booikingCheck__link_to_searchResults')
				"></div>
			</div>
		</div>
	</div>
<!-- /ko -->

<!-- ko if: bookingCheckPriceChangeData -->
<div data-bind="
	automaticPopup: {
		title: $root.i18n('FlightsSearchResults', 'bookingCheck__priceChanged__title'),
		buttons: [
			{
				text: $root.i18n('FlightsSearchResults', 'bookingCheck__priceChanged__button_return'),
				click: function () {$(this).data('ui-popup__close')();},
				'class': 'ui-button_pseudoLink ui-button_secondary'
			},
			{
				text: $root.i18n('FlightsSearchResults', 'bookingCheck__priceChanged__button_continue'),
				click: bookingCheckPriceChangeData().proceed
			}
		]
	}">
	<div class="nemo-flights-results__bookingCheck nemo-flights-results__bookingCheck_priceChanged">
		<div class="nemo-flights-results__bookingCheck__priceChanged__oldPriceInfo">
			<!-- ko text: $root.i18n('FlightsSearchResults', 'bookingCheck__priceChanged__oldPriceMessage') --><!-- /ko -->
			<money data-bind="money: bookingCheckPriceChangeData().oldPrice" class="nemo-flights-results__bookingCheck__priceChanged__oldPriceInfo__price"></money>
		</div>
		<div class="nemo-flights-results__bookingCheck__priceChanged__newPriceInfo">
			<!-- ko text: $root.i18n('FlightsSearchResults', 'bookingCheck__priceChanged__newPriceMessage') --><!-- /ko -->
			<money data-bind="money: bookingCheckPriceChangeData().newPrice" class="nemo-flights-results__bookingCheck__priceChanged__newPriceInfo__price"></money>
		</div>
	</div>
</div>
<!-- /ko -->
		<div class="flights-carrierResults" data-bind="carrierSelectedFlightsScroller"><!-- ko if: !resultsLoaded() --><div class="nemo-flights-results__content__results__loadingDummy"><div class="ui-dialog-titlebar ui-dialog-titlebar_progress nemo-flights-form__searchingInfoPopup__header nemo-flights-results__content__results__loadingDummy__header"><span class="ui-dialog-title"><span data-bind="timedBlockToggle: 120, text: $root.i18n('FlightsSearchResults', 'loadingDummy__results__progressText_timed')" style="display: none;"></span><span data-bind="timedBlockToggle: 120, text: $root.i18n('FlightsSearchResults', 'loadingDummy__results__progressText')"></span></span></div></div><!-- /ko --><!-- ko if: resultsLoaded() --><!-- ko foreach: routeLegs --><div class="flights-carrierResults__leg"><div class="flights-carrierResults__leg__header" data-bind="with: $parent.searchInfo().segments[$index()]"><!-- ko if: $parents[1].searchInfo().tripType == 'RT' --><span class="flights-carrierResults__leg__header__caption"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__caption_' + $parentContext.$index())"></span><div class="flights-carrierResults__leg__header__adaptiveCaption"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__adaptiveCaption_' + $parentContext.$index())"></div><!-- /ko --><span class="flights-carrierResults__leg__header__date" data-bind="text: departureDate.getDate() + ' ' + departureDate.getMonthName()"></span><span class="flights-carrierResults__leg__header__departure" data-bind="text: departure.city ? departure.city.name : departure.name"></span><span class="flights-carrierResults__leg__header__arrival" data-bind="text: arrival.city ? arrival.city.name : arrival.name"></span><!-- ko if: $parents[1].searchInfo().tripType == 'RT' --><div data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__header__tip_' + $parentContext.$index()),attr: {'class': 'flights-carrierResults__leg__header__tip' +((($parentContext.$index() == 0 && $parents[1].shiftedDateReturnSelected()) || ($parentContext.$index() == 1 && $parents[1].shiftedDateDepartSelected())) ? ' flights-carrierResults__leg__header__tip_visible' : '')}"></div><!-- /ko --></div><!-- ko template: { name: 'nemo-koTemplate-FlightsResults-DateSwitcher', data: $data } --><!-- /ko --><div class="flights-carrierResults__leg__filters"><div class="flights-carrierResults__leg__filters__sort"><div class="nemo-ui-select js-common-pseudoSelect flights-carrierResults__leg__filters__sort__select"><div class="nemo-ui-select__toggle js-common-pseudoSelect__toggle nemo-flights-results__commonSelect"data-bind="pseudoSelect: null, text: $root.i18n('FlightsSearchResults','sortType_' + $parent.sortByLeg()[$index()])"></div><div class="nemo-ui-select__dropdown js-common-pseudoSelect__dropdown" data-bind="foreach: $parent.carrierPossibleSorts"><div data-bind="attr: { class: 'nemo-ui-select__dropdown__item' }, click: function () {$parents[1].carrierSort($data, $parent.index)}, text: $root.i18n('FlightsSearchResults','sortType_' + $data)"></div></div></div></div><!-- ko if: $parent.directOnlyFilterEnableByLeg()[$index()] --><div class="flights-carrierResults__leg__filters__directOnly"><label class="nemo-ui-checkbox flights-carrierResults__leg__filters__directOnly__checkbox"data-bind="click: function () {$parent.filterDirectOnly(!$parent.filteredDirectOnlyByLeg()[$index()], $index())}"><input class="nemo-ui-checkbox__input" type="checkbox" data-bind="checked: $parent.filteredDirectOnlyByLeg()[$index()]"><span class="nemo-ui-checkbox__caption flights-carrierResults__leg__filters__directOnly__checkbox__caption"data-bind="text: $root.i18n('FlightsSearchResults','flightsGroup__leg__transfers__noTransfers')"></span></label></div><!-- /ko --></div><div class="flights-carrierResults__leg__table"><div class="flights-carrierResults__leg__table__row flights-carrierResults__leg__table__row_header"><div class="flights-carrierResults__leg__table__flightsHeader" data-bind="text: $root.i18n('FlightsSearchResults','carrierResults__leg__table__flightsHeader')"></div><!-- ko foreach: fareArray --><!-- ko if: $parent.checkGroupIsAvailable($data, $parents[1], $parent.flights, $parent.fareArray) --><div class="flights-carrierResults__leg__table__fareHeader" data-bind="css: { 'flights-carrierResults__leg__table__fareHeader_fareSelected': $parent.selectedPrice() && $parent.selectedPrice().fareGroup.id == id }"><span class="flights-carrierResults__leg__table__fareHeader__title" data-bind="text: name"></span></div><!-- /ko --><!-- /ko --></div><!-- ko foreach: flights --><div data-bind="attr: {'class': 'flights-carrierResults__leg__table__row flights-carrierResults__leg__table__row_flight_' + $index() +(detailsOpen() ? ' flights-carrierResults__leg__table__row_detailsOpen' : '') +($parent.selectedPrice() && $parent.selectedPrice().flight.id == id ? ' flights-carrierResults__leg__table__row_flightSelected' : '') +(isHidden() ? ' flights-carrierResults__leg__table__row_hidden' : '')}"><div class="flights-carrierResults__leg__table__flightInfo"data-bind="css: {'flights-carrierResults__leg__table__flightInfo_detailsOpen': detailsOpen(),'flights-carrierResults__leg__table__flightInfo_flightSelected': $parent.selectedPrice() && $parent.selectedPrice().flight.id == id}"><div class="flights-carrierResults__leg__table__flightInfo__shortInfo" data-bind="click: function () { detailsOpen(!detailsOpen()) }"><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__departure"><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__departure__time" data-bind="text: depDateTime.getTime()"></div><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__departure__IATA" data-bind="text: depAirp.IATA, tooltip: {content: depAirp.name}"></div></div><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__minPrice"><!-- ko text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__flight__priceStart') --><!-- /ko --><money class="flights-carrierResults__leg__table__flightInfo__shortInfo__minPrice__price" format="0,0$" data-bind="money: minPrice"></money></div><!-- ko if: transfers.length --><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__transfers"data-bind="text: transfers.length + ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__flight__transfers_' +$root.helpers.getNumeral(transfers.length, 'one', 'twoToFour', 'fourPlus')) + transfersCodeIATA(),tooltip: { content: transfersCityName()}"></div><!-- /ko --><!-- ko if: !transfers.length --><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__transfers"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__flight__direct')"></div><!-- /ko --><!-- ko if: hasStopPoints --><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__stopover"data-bind="tooltip: { content: $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__flightInfo__shortInfo__stopover')}">!</div><!-- /ko --><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__timeEnRoute" data-bind="text: totalTimeEnRoute.readableStringShort()"></div><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__arrival"><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__arrival__time" data-bind="text: arrDateTime.getTime()"></div><div class="flights-carrierResults__leg__table__flightInfo__shortInfo__arrival__IATA" data-bind="text: arrAirp.IATA, tooltip: {content: arrAirp.name}"></div></div></div><!-- ko if: detailsOpen() --><div class="flights-carrierResults__leg__flightRoute"><!-- ko foreach: segments --><div class="flights-carrierResults__leg__flightRoute__header"><div class="flights-carrierResults__leg__flightRoute__header__logo"><img src="" alt="" class="flights-carrierResults__leg__flightRoute__header__logo__image"  data-bind="attr: {src: $root.controller.options.staticInfoURL + marketingCompany.logo.image}"></div><div class="flights-carrierResults__leg__flightRoute__header__flight"><div class="flights-carrierResults__leg__flightRoute__header__flight__title" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__flight__caption')"></div><div class="flights-carrierResults__leg__flightRoute__header__flight__value" data-bind="text: (marketingCompany ? marketingCompany.IATA : '??') + '-' + flightNumber"></div></div><div class="flights-carrierResults__leg__flightRoute__header__aircraft js-carrierResults__leg__flightRoute__aircraft"><div class="flights-carrierResults__leg__flightRoute__header__aircraft__title" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__aircraft__caption')"></div><div class="nemo-ui-pseudoLink flights-carrierResults__leg__flightRoute__header__aircraft__value"data-bind="css: { 'nemo-ui-pseudoLink': $parents[2].options.showAirplanePopup },text: (aircraftType ? aircraftType.name : '???'),popup: $parents[2].options.showAirplanePopup && {url: '/index.php?go=guide_popup/aircraft&code='+(aircraftType ? aircraftType.code : '???')+'&iframePopupMode=1',contentType: 'iframe',dialogClass: 'flights-carrierResults__guideIframePopup flights-carrierResults__guideIframePopup_aircraft',autoOpen: true,parentClass: 'js-carrierResults__leg__flightRoute__aircraft',block: 'aircraftPopup',title: aircraftType ? aircraftType.name : '???',loaderClass: 'nemo-ui-loader',loaderText: ' '}"></div><div class="js-nemoApp__popupBlock" data-block="aircraftPopup" style="display: none;"></div></div></div><!-- ko if: $index() == 0 --><div class="flights-carrierResults__leg__flightRoute__subHeader"><div class="flights-carrierResults__leg__flightRoute__subHeader__item" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__subHeader__depCaption')"></div><div class="flights-carrierResults__leg__flightRoute__subHeader__item" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__subHeader__arrCaption')"></div></div><!-- /ko --><div class="flights-carrierResults__leg__flightRoute__segment"><div class="flights-carrierResults__leg__flightRoute__segment__departure"><div class="flights-carrierResults__leg__flightRoute__segment__departure__time" data-bind="text: depDateTime.getTime()"></div><div class="flights-carrierResults__leg__flightRoute__segment__departure__place" data-bind="text: depAirp.name || '???'"></div></div><div class="flights-carrierResults__leg__flightRoute__segment__arrival"><div class="flights-carrierResults__leg__flightRoute__segment__arrival__time" data-bind="text: arrDateTime.getTime()"></div><div class="flights-carrierResults__leg__flightRoute__segment__arrival__place" data-bind="text: arrAirp.name || '???'"></div></div></div><!-- ko if: typeof $parent.transfers[$index()] != "undefined" --><div class="flights-carrierResults__leg__flightRoute__transfer"><span class="flights-carrierResults__leg__flightRoute__transfer__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__transfer__caption')"></span><span class="flights-carrierResults__leg__flightRoute__transfer__time" data-bind="text: $parent.transfers[$index()].duration.readableString()"></span></div><!-- /ko --><!-- ko if: stopPoints.length --><!-- ko foreach: stopPoints --><div class="flights-carrierResults__leg__flightRoute__stopover"><span class="flights-carrierResults__leg__flightRoute__stopover__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover')"></span><span class="flights-carrierResults__leg__flightRoute__stopover__place"><span class="flights-carrierResults__leg__flightRoute__stopover__place__name" data-bind="text: airport.name"></span><!-- ko if: terminal --><span class="flights-carrierResults__leg__flightRoute__stopover__place__terminal"data-bind="text: ' (' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__terminal') + ' ' + terminal + ')'"></span><!-- /ko --></span><!-- ko if: depDateTime.getTime() != arrDateTime.getTime() --><span class="flights-carrierResults__leg__flightRoute__stopover__time"><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeArrival') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__start"data-bind="text: arrDateTime.getHours() + ':' + arrDateTime.getMinutes()"></span><!-- ko text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeDeparture') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__end"data-bind="text: depDateTime.getHours() + ':' + depDateTime.getMinutes()"></span><span class="flights-carrierResults__leg__flightRoute__stopover__time__duration"data-bind="text: ' (' + duration.readableString() + ')'"></span></span><!-- /ko --><!-- ko if: depDateTime.getTime() == arrDateTime.getTime() --><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__noDate') --><!-- /ko --><!-- /ko --><!-- ko if: passengersLanding --><span class="flights-carrierResults__leg__flightRoute__stopover__passLanding"data-bind="text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__passengerLanding')"></span><!-- /ko --></div><!-- /ko --><!-- /ko --><!-- /ko --><div class="flights-carrierResults__leg__flightRoute__footer"><span class="flights-carrierResults__leg__flightRoute__footer__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__footer__caption')"></span><!-- ko text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__footer__text').replace('[%-distance-%]', totalDistance).replace('[%-time-%]', timeEnRoute.readableString()) --><!-- /ko --></div><!-- ko if: specialRules.length --><div class="flights-carrierResults__leg__flightRoute-familyWarning" data-bind="tooltip: {content: specialRules.join('<br><br>')}"><i class="fa fa-exclamation-circle flights-carrierResults__leg__flightRoute-familyWarning__icon"></i><span class="flights-carrierResults__leg__flightRoute-familyWarning__text" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__familyWarning__title')"></span></div><!-- /ko --></div><!-- /ko --></div><!-- ko foreach: $parent.fareArray --><!-- ko if: $parents[1].checkGroupIsAvailable($data, $parents[2], $parents[1].flights, $parents[1].fareArray) --><div data-bind="attr: {class: 'flights-carrierResults__leg__table__fareForFlight flights-carrierResults__leg__table__fareForFlight_' + $index() +($parents[1].selectedPrice() && $parents[1].selectedPrice().fareGroup.id == id ? ' flights-carrierResults__leg__table__fareForFlight_fareSelected' : '') +($parents[1].selectedPrice() && $parents[1].selectedPrice().flight.id == $parent.id ? ' flights-carrierResults__leg__table__fareForFlight_flightSelected' : '')}"><!-- ko if: $parents[2].prices[$parent.id+id] && $parents[2].prices[$parent.id+id].avlSeats > 0 --><div class="flights-carrierResults__leg__table__fareForFlight__short js-flights-carrierResults__leg__fareSelector" data-bind="with: $parents[2].prices[$parent.id+id],click: function () {for (var i = 0; i < $parents[1].flights.length; i++) {$parents[1].flights[i].detailsOpen(false);}$parent.detailsOpen(true);$parents[1].selectedPrice($parents[2].prices[$parent.id+id]);}"><div class="flights-carrierResults__leg__table__fareForFlight__short__adaptiveFareName" data-bind="text: fareGroup.name"></div><money class="flights-carrierResults__leg__table__fareForFlight__short__price" data-bind="money: totalPrice" format="0,0$"></money><div class="flights-carrierResults__leg__table__fareForFlight__short__seats"data-bind="text: avlSeats < 4 ? $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__fare__seats_few'): ''"></div></div><div data-bind="visible: $parent.detailsOpen()"><div class="flights-carrierResults__leg__table__fareForFlight__compare" data-bind="foreach: options"><div class="flights-carrierResults__leg__table__fareForFlight__compare__item nemo-flights-results__fareFamilies__features__feature" data-bind="tooltip: {content: $data.description}"><span class="nemo-flights-results__fareFamilies__features__feature__icon"><!-- ko if: $data.payment === false --><i class="fa fa-check"></i><!-- /ko --><!-- ko if: $data.payment === true --><i data-bind="currencyIcon: $root.controller.viewModel.agency.priceCurrency()"></i><!-- /ko --><!-- ko if: $data.payment === null --><i class="fa fa-times"></i><!-- /ko --></span><span class="nemo-flights-results__fareFamilies__features__feature__text" data-bind="text: $data.title"></span></div></div><div class="flights-carrierResults__leg__table__fareForFlight__tariff js-flights-carrierResults__leg__table__fareForFlight__tariff"><span class="nemo-ui-pseudoLink flights-carrierResults__leg__table__fareForFlight__tariff__link" data-bind="component: {name: 'Flights/SearchResults/FareRules/Controller',params: {flight: $parents[2].flights[$parents[2].prices[$parent.id+id].realFlightsIds[0]],linkText: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__fare__rules')}}"></span></div></div><!-- /ko --><!-- ko if: !$parents[2].prices[$parent.id+id] || $parents[2].prices[$parent.id+id].avlSeats == 0 --><div class="flights-carrierResults__leg__table__fareForFlight__noSeats-adaptiveFareName" data-bind="text: name"></div><div class="flights-carrierResults__leg__table__fareForFlight__noSeats" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__fare__noSeats')"></div><!-- ko if: $parent.detailsOpen() --><div class="flights-carrierResults__leg__table__fareForFlight__compare" data-bind="foreach: options"><div class="flights-carrierResults__leg__table__fareForFlight__compare__item nemo-flights-results__fareFamilies__features__feature" data-bind="tooltip: {content: $data.description}"><span class="nemo-flights-results__fareFamilies__features__feature__icon"><!-- ko if: $data.payment === false --><i class="fa fa-check"></i><!-- /ko --><!-- ko if: $data.payment === true --><i data-bind="currencyIcon: $root.controller.viewModel.agency.priceCurrency()"></i><!-- /ko --><!-- ko if: $data.payment === null --><i class="fa fa-times"></i><!-- /ko --></span><span class="nemo-flights-results__fareFamilies__features__feature__text" data-bind="text: $data.title"></span></div></div><!-- /ko --><!-- /ko --></div><!-- /ko --><!-- /ko --><div class="flights-carrierResults__leg__flightRoute flights-carrierResults__leg__flightRoute_adaptive" data-bind="visible: detailsOpen()"><!-- ko foreach: segments --><div class="flights-carrierResults__leg__flightRoute__header"><div class="flights-carrierResults__leg__flightRoute__header__logo"><img src="" alt="" class="flights-carrierResults__leg__flightRoute__header__logo__image"  data-bind="attr: {src: $root.controller.options.staticInfoURL + marketingCompany.logo.image}"></div><div class="flights-carrierResults__leg__flightRoute__header__flight"><div class="flights-carrierResults__leg__flightRoute__header__flight__title" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__flight__caption')"></div><div class="flights-carrierResults__leg__flightRoute__header__flight__value" data-bind="text: (marketingCompany ? marketingCompany.IATA : '??') + '-' + flightNumber"></div></div><div class="flights-carrierResults__leg__flightRoute__header__aircraft js-carrierResults__leg__flightRoute__aircraft"><div class="flights-carrierResults__leg__flightRoute__header__aircraft__title" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__aircraft__caption')"></div><div class="nemo-ui-pseudoLink flights-carrierResults__leg__flightRoute__header__aircraft__value"data-bind="css: { 'nemo-ui-pseudoLink': $parents[2].options.showAirplanePopup },text: (aircraftType ? aircraftType.name : '???'),popup: $parents[2].options.showAirplanePopup && {url: '/index.php?go=guide_popup/aircraft&code='+(aircraftType ? aircraftType.code : '???')+'&iframePopupMode=1',contentType: 'iframe',dialogClass: 'flights-carrierResults__guideIframePopup flights-carrierResults__guideIframePopup_aircraft',autoOpen: true,parentClass: 'js-carrierResults__leg__flightRoute__aircraft',block: 'aircraftPopup',title: aircraftType ? aircraftType.name : '???',loaderClass: 'nemo-ui-loader',loaderText: ' '}"></div><div class="js-nemoApp__popupBlock" data-block="aircraftPopup" style="display: none;"></div></div></div><!-- ko if: $index() == 0 --><div class="flights-carrierResults__leg__flightRoute__subHeader"><div class="flights-carrierResults__leg__flightRoute__subHeader__item" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__subHeader__depCaption')"></div><div class="flights-carrierResults__leg__flightRoute__subHeader__item" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__subHeader__arrCaption')"></div></div><!-- /ko --><div class="flights-carrierResults__leg__flightRoute__segment"><div class="flights-carrierResults__leg__flightRoute__segment__departure"><div class="flights-carrierResults__leg__flightRoute__segment__departure__time" data-bind="text: depDateTime.getTime()"></div><div class="flights-carrierResults__leg__flightRoute__segment__departure__place" data-bind="text: depAirp.name || '???'"></div></div><div class="flights-carrierResults__leg__flightRoute__segment__arrival"><div class="flights-carrierResults__leg__flightRoute__segment__arrival__time" data-bind="text: arrDateTime.getTime()"></div><div class="flights-carrierResults__leg__flightRoute__segment__arrival__place" data-bind="text: arrAirp.name || '???'"></div></div></div><!-- ko if: typeof $parent.transfers[$index()] != "undefined" --><div class="flights-carrierResults__leg__flightRoute__transfer"><span class="flights-carrierResults__leg__flightRoute__transfer__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__transfer__caption')"></span><span class="flights-carrierResults__leg__flightRoute__transfer__time" data-bind="text: $parent.transfers[$index()].duration.readableString()"></span></div><!-- /ko --><!-- ko if: stopPoints.length --><!-- ko foreach: stopPoints --><div class="flights-carrierResults__leg__flightRoute__stopover"><span class="flights-carrierResults__leg__flightRoute__stopover__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover')"></span><span class="flights-carrierResults__leg__flightRoute__stopover__place"><span class="flights-carrierResults__leg__flightRoute__stopover__place__name" data-bind="text: airport.name"></span><!-- ko if: terminal --><span class="flights-carrierResults__leg__flightRoute__stopover__place__terminal"data-bind="text: ' (' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__terminal') + ' ' + terminal + ')'"></span><!-- /ko --></span><!-- ko if: depDateTime.getTime() != arrDateTime.getTime() --><span class="flights-carrierResults__leg__flightRoute__stopover__time"><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeArrival') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__start"data-bind="text: arrDateTime.getHours() + ':' + arrDateTime.getMinutes()"></span><!-- ko text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeDeparture') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__end"data-bind="text: depDateTime.getHours() + ':' + depDateTime.getMinutes()"></span><span class="flights-carrierResults__leg__flightRoute__stopover__time__duration"data-bind="text: ' (' + duration.readableString() + ')'"></span></span><!-- /ko --><!-- ko if: depDateTime.getTime() == arrDateTime.getTime() --><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__noDate') --><!-- /ko --><!-- /ko --><!-- ko if: passengersLanding --><span class="flights-carrierResults__leg__flightRoute__stopover__passLanding"data-bind="text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__passengerLanding')"></span><!-- /ko --></div><!-- /ko --><!-- /ko --><!-- /ko --><div class="flights-carrierResults__leg__flightRoute__footer"><span class="flights-carrierResults__leg__flightRoute__footer__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__footer__caption')"></span><!-- ko text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__footer__text').replace('[%-distance-%]', totalDistance).replace('[%-time-%]', timeEnRoute.readableString()) --><!-- /ko --></div><!-- ko if: specialRules.length --><div class="flights-carrierResults__leg__flightRoute-familyWarning" data-bind="tooltip: {content: specialRules.join('<br><br>')}"><i class="fa fa-exclamation-circle flights-carrierResults__leg__flightRoute-familyWarning__icon"></i><span class="flights-carrierResults__leg__flightRoute-familyWarning__text" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__familyWarning__title')"></span></div><!-- /ko --></div></div><!--/ko --></div></div><!-- /ko --><!-- ko if: !realFlightSelected() --><div class="flights-carrierResults__uncombinable" data-bind="text: $root.i18n('FlightsSearchResults','carrierResults__uncombinable')"></div><!-- /ko --><div class="flights-carrierResults__buyBlock"><div class="flights-carrierResults__selected"><!-- ko if: realFlightSelected() --><div class="flights-carrierResults__selected__header" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__header')"></div><div class="flights-carrierResults__selected__flights" data-bind="foreach: routeLegs"><div class="flights-carrierResults__selected__flights__leg"><div class="flights-carrierResults__selected__flights__leg__header" data-bind="with: selectedPrice().flight"><!-- ko if: $parents[1].searchInfo().tripType == 'RT' --><span class="flights-carrierResults__selected__flights__leg__header__text" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__header_'+$index())"></span><!-- /ko --><span class="flights-carrierResults__selected__flights__leg__header__date"data-bind="text: depDateTime.getDate() + '&nbsp;' + depDateTime.getMonthName()"></span><span class="flights-carrierResults__selected__flights__leg__header__DOW"data-bind="text: ',&nbsp;' + depDateTime.getDOWNameShort() + ',&nbsp;'"></span><span class="flights-carrierResults__selected__flights__leg__header__departure"data-bind="text: depAirp.name || depAirp.city.name + '&nbsp;'"></span><span class="flights-carrierResults__selected__flights__leg__header__date"data-bind="text: '&nbsp;' + arrDateTime.getDate() + '&nbsp;' + arrDateTime.getMonthName()"></span><span class="flights-carrierResults__selected__flights__leg__header__DOW"data-bind="text: ',&nbsp;' + arrDateTime.getDOWNameShort() + ',&nbsp;'"></span><span class="flights-carrierResults__selected__flights__leg__header__arrival"data-bind="text: arrAirp.name || arrAirp.city.name + '&nbsp;'"></span><div class="flights-carrierResults__selected__flights__leg__header__localTime"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__header__localTime')"></div></div><div class="flights-carrierResults__selected__flights__leg__wrap"><div class="flights-carrierResults__selected__flights__leg__passengers" data-bind="foreach: ['ADT', 'CLD', 'INS', 'INF', 'YTH', 'SRC']"><!-- ko if: $parents[1].searchInfo().passengers[$data] > 0 --><span class="flights-carrierResults__selected__flights__leg__passengers__type"><!-- ko text: $root.i18n('FlightsSearchResults', 'carrierResults__pass_'+$data) --><!-- /ko -->&nbsp;<!-- ko text: $parents[1].searchInfo().passengers[$data] --><!-- /ko --></span><!-- /ko --></div><div class="flights-carrierResults__selected__flights__leg__route" data-bind="with: selectedPrice().flight"><div class="flights-carrierResults__selected__flights__leg__route__departure"><div class="flights-carrierResults__selected__flights__leg__route__departure__time" data-bind="text: depDateTime.getTime()"></div><div class="flights-carrierResults__selected__flights__leg__route__departure__IATA" data-bind="text: depAirp.IATA, tooltip: {content: depAirp.name}"></div></div><div class="flights-carrierResults__selected__flights__leg__route__passengers" data-bind="text: $parents[1].passengersSummary()"></div><money class="flights-carrierResults__selected__flights__leg__route__price" format="0,0 $" data-bind="money: $parent.selectedPrice().totalPrice"></money><div class="flights-carrierResults__selected__flights__leg__route__transfers"><!-- ko if: transfers.length --><!-- ko text: transfers.length + ' ' + $root.i18n('FlightsSearchResults','carrierResults__leg__table__flight__transfers_' + $root.helpers.getNumeral(transfers.length, 'one', 'twoToFour', 'fourPlus')) --><!-- /ko --><!-- /ko --><!-- ko if: !transfers.length --><!-- ko text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__table__flight__direct') --><!-- /ko --><!-- /ko --></div><div class="flights-carrierResults__selected__flights__leg__route__timeEnRoute" data-bind="text: totalTimeEnRoute.readableStringShort()"></div><div class="flights-carrierResults__selected__flights__leg__route__arrival"><div class="flights-carrierResults__selected__flights__leg__route__arrival__time" data-bind="text: arrDateTime.getTime()"></div><div class="flights-carrierResults__selected__flights__leg__route__arrival__IATA" data-bind="text: arrAirp.IATA, tooltip: {content: arrAirp.name}"></div></div><div class="flights-carrierResults__selected__flights__leg__route__distance"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__route__totals').replace('[%-distance-%]', totalDistance).replace('[%-time-%]', timeEnRoute.readableString())"></div><!-- ko if: transfers.length --><div class="flights-carrierResults__selected__flights__leg__route__fullTransfers"><span class="flights-carrierResults__selected__flights__leg__route__fullTransfers__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__route__fullTransfersCaption')"></span><!-- ko foreach: transfers --><!-- ko if: $index() -->, <!-- /ko --><!-- ko text: (place.name || place.IATA) + ' (' + duration.readableStringShort() + ')' --><!-- /ko --><!-- /ko --></div><!-- /ko --><!-- ko foreach: segments --><!-- ko if: stopPoints.length --><!-- ko foreach: stopPoints --><div class="flights-carrierResults__selected__flights__leg__route__stopover"><span class="flights-carrierResults__leg__flightRoute__stopover__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover')"></span><span class="flights-carrierResults__leg__flightRoute__stopover__place"><span class="flights-carrierResults__leg__flightRoute__stopover__place__name" data-bind="text: airport.name"></span><!-- ko if: terminal --><span class="flights-carrierResults__leg__flightRoute__stopover__place__terminal"data-bind="text: ' (' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__terminal') + ' ' + terminal + ')'"></span><!-- /ko --></span><!-- ko if: depDateTime.getTime() != arrDateTime.getTime() --><span class="flights-carrierResults__leg__flightRoute__stopover__time"><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeArrival') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__start"data-bind="text: arrDateTime.getHours() + ':' + arrDateTime.getMinutes()"></span><!-- ko text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__timeDeparture') + ' ' --><!-- /ko --><span class="flights-carrierResults__leg__flightRoute__stopover__time__end"data-bind="text: depDateTime.getHours() + ':' + depDateTime.getMinutes()"></span><span class="flights-carrierResults__leg__flightRoute__stopover__time__duration"data-bind="text: ' (' + duration.readableString() + ')'"></span></span><!-- /ko --><!-- ko if: depDateTime.getTime() == arrDateTime.getTime() --><!-- ko text: ', ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__noDate') --><!-- /ko --><!-- /ko --><!-- ko if: passengersLanding --><span class="flights-carrierResults__leg__flightRoute__stopover__passLanding"data-bind="text: ' ' + $root.i18n('FlightsSearchResults', 'carrierResults__leg__flightRoute__stopover__passengerLanding')"></span><!-- /ko --></div><!-- /ko --><!-- /ko --><!-- /ko --></div><div class="flights-carrierResults__selected__flights__leg__fare" data-bind="with: selectedPrice().fareGroup"><div class="flights-carrierResults__selected__flights__leg__fare__header js-carrierResults__selected__flightRoute__fareHeader"><div class="nemo-ui-pseudoLink flights-carrierResults__selected__flights__leg__fare__link" data-bind="component: {name: 'Flights/SearchResults/FareRules/Controller',params: {flight: $parents[1].realFlightSelected(),linkText: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__fare__rules')}}"></div><span class="flights-carrierResults__selected__flights__leg__fare__header__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__fare__header')"></span><!-- ko text: name + ' '--><!-- /ko --><!-- ko if: $parents[1].routeLegs().length == 1 --><span class="flights-carrierResults__selected__flights__leg__fare__header__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__selected__leg__fare__codes')"></span><!-- ko text: $parent.selectedPrice().tariffCodes --><!-- /ko --><!-- /ko --></div><div class="flights-carrierResults__selected__flights__leg__fare__features" data-bind="foreach: options"><div class="flights-carrierResults__selected__flights__leg__fare__features__item nemo-flights-results__fareFamilies__features__feature"><span class="nemo-flights-results__fareFamilies__features__feature__icon"><!-- ko if: $data.payment === false --><i class="fa fa-check"></i><!-- /ko --><!-- ko if: $data.payment === true --><i data-bind="currencyIcon: $root.controller.viewModel.agency.priceCurrency()"></i><!-- /ko --><!-- ko if: $data.payment === null --><i class="fa fa-times"></i><!-- /ko --></span><span class="nemo-flights-results__fareFamilies__features__feature__text nemo-flights-results__fareFamilies__features__feature__text__withBreak" data-bind="text: $data.title, visible: $data.type == 'baggage'"></span><span class="nemo-flights-results__fareFamilies__features__feature__text" data-bind="text: $data.description ? $data.description : ''"></span></div></div></div></div></div></div><!-- /ko --></div><!-- ko if: realFlightSelected() --><div class="flights-carrierResults__payInfo"><div class="flights-carrierResults__payInfo__header" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__payInfo__header')"></div><div class="flights-carrierResults__payInfo__details"><div class="flights-carrierResults__payInfo__details__priceParts"><div class="flights-carrierResults__payInfo__details__priceParts__item"><div class="flights-carrierResults__payInfo__details__priceParts__item__name" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__payInfo__partheader_fares')"></div><money class="flights-carrierResults__payInfo__details__priceParts__item__value" data-bind="money: realFlightSelected().price.flightPrice"></money></div><!-- ko if: isTotalPriceAndFarePricesNotMatch() --><div class="flights-carrierResults__payInfo__details__priceParts__item flights-carrierResults__payInfo__details__priceParts__item_priceWarning"><i class="fa fa-exclamation-circle flights-carrierResults__payInfo__details__priceParts__item_priceWarning__icon"></i><span class="flights-carrierResults__payInfo__details__priceParts__item_priceWarning__text"data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__payInfo__priceWarning')"></span></div><!-- /ko --><div class="flights-carrierResults__payInfo__details__priceParts__item"><div class="flights-carrierResults__payInfo__details__priceParts__item__name" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__payInfo__partheader_charges')"></div><money class="flights-carrierResults__payInfo__details__priceParts__item__value" data-bind="money: realFlightSelected().price.agencyCharge"></money></div></div><div class="flights-carrierResults__payInfo__total"><div class="flights-carrierResults__payInfo__total__caption" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__payInfo__total')"></div><money class="flights-carrierResults__payInfo__total__amount" data-bind="money: realFlightSelected().getTotalPrice()" format="0,0 $"></money></div></div><div class="nemo-ui-button nemo-ui-buttn_main flights-carrierResults__buyButton" data-bind="flightsResultsBuyButtonFlightCheck: {ids: [realFlightSelected().id],controller: $data,addClass: 'flights-carrierResults__buyButton_bookingCheck'}"><span class="flights-carrierResults__buyButton__text" data-bind="text: $root.i18n('FlightsSearchResults', 'carrierResults__buyButton')"></span><span class="flights-carrierResults__buyButton__checkText" data-bind="text: $root.i18n('FlightsSearchResults','carrierResults__buyButton__checking')"></span></div></div><!-- /ko --></div><!-- /ko --></div>
	<!-- /ko -->
</div>
<script id="nemo-koTemplate-FlightsResults-DateSwitcher" type="text/html"><div class="flights-carrierResults__leg__dates"><!-- ko if: prevDate --><div class="flights-carrierResults__leg__dates__arrow flights-carrierResults__leg__dates__arrow_prev"data-bind="click: function () {$parents[1].makeShiftedDateSearch($index(), prevDate);}"></div><!-- /ko --><!-- ko if: !prevDate --><div class="flights-carrierResults__leg__dates__arrow flights-carrierResults__leg__dates__arrow_disabled flights-carrierResults__leg__dates__arrow_prev"></div><!-- /ko --><!-- ko foreach: otherDates --><div class="flights-carrierResults__leg__dates__date"data-bind="attr: {'class': 'flights-carrierResults__leg__dates__date flights-carrierResults__leg__dates__date_' + $index() +(date.getTimestamp() == $parent.date.getTimestamp() ? ' flights-carrierResults__leg__dates__date_active' : '') +(!active() ? ' flights-carrierResults__leg__dates__date_disabled' : '') +((date.getTimestamp() == $parents[2].shiftedDateDepartSelected() || date.getTimestamp() == $parents[2].shiftedDateReturnSelected()) ? ' flights-carrierResults__leg__dates__date_selected' : '')},click: function () {if (active()) {if($parents[2].searchInfo().tripType == 'RT'){$parents[2].makeShiftedDateSearch($parentContext.$index(), date, true);}else{$parents[2].makeShiftedDateSearch($parentContext.$index(), date);}}}"><div class="flights-carrierResults__leg__dates__date__date" data-bind="text: date.getDate()"></div><div class="flights-carrierResults__leg__dates__date__month" data-bind="text: date.getMonthNameShort()"></div><div class="flights-carrierResults__leg__dates__date__DOW" data-bind="text: date.getDOWNameShort()"></div><div class="flights-carrierResults__leg__dates__date__price"><!-- ko if: active() && !minPrice() && $parents[2].searchInfo().tripType != 'CR' --><!-- ko text: $root.i18n('FlightsSearchResults','carrierResults__leg__date__loading') --><!-- /ko --><!-- /ko --><!-- ko if: !active() && $parents[2].searchInfo().tripType != 'CR' --><!-- ko text: $root.i18n('FlightsSearchResults','carrierResults__leg__date__notAvail') --><!-- /ko --><!-- /ko --><!-- ko if: active() && minPrice() --><span class="flights-carrierResults__leg__dates__date__price__caption" data-bind="text: $root.i18n('FlightsSearchResults','carrierResults__leg__date__priceFrom')"></span> <money data-bind="money: minPrice()" format="0,0$"></money><!-- /ko --></div></div><!-- /ko --><!-- ko if: nextDate --><div class="flights-carrierResults__leg__dates__arrow flights-carrierResults__leg__dates__arrow_next"data-bind="click: function () {$parents[1].makeShiftedDateSearch($index(), nextDate);}"></div><!-- /ko --><!-- ko if: !nextDate --><div class="flights-carrierResults__leg__dates__arrow flights-carrierResults__leg__dates__arrow_disabled flights-carrierResults__leg__dates__arrow_next"></div><!-- /ko --></div></script>